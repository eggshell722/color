<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>云南菜市场数量</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <style>
        #chart-container {
            width: 900px;
            height: 500px;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <div id="chart-container"></div>
    <script src="echarts.min.js"></script>
    <script>
        // 初始化图表
        const chartDom = document.getElementById('chart-container');
        const myChart = echarts.init(chartDom);

        // 数据
        const data = {
            cities: ['昆明', '曲靖', '昭通', '丽江', '大理', '临沧', '西双版纳', '德宏', '迪庆', '玉溪', '保山', '普洱', '楚雄', '红河', '文山', '怒江'],
            counts: [225, 200, 162, 70, 200, 95, 135, 30, 25, 163, 91, 155, 136, 200, 182, 26]
        };

        // 配置项
        const option = {
            title: {
                text: '云南各地级市菜市场数量分布',
                left: 'center',
                textStyle: {
                    fontSize: 16,
                    fontWeight: 'bold'
                }
            },
            grid: {  // 新增：调整图表整体边距，给底部留更多空间
                bottom: '20%'
            },
            tooltip: {
                trigger: 'item',
                formatter: '{b}: {c}个'
            },
            xAxis: {
                type: 'category',
                data: data.cities,
                axisLabel: {
                    rotate: 45,
                    fontSize: 10,
                    margin: 15
                },
                axisLine: {
                    lineStyle: {
                        color: '#666'
                    }
                }
            },
            yAxis: {
                type: 'value',
                name: '数量（个）',
                nameTextStyle: {
                    padding: [0, 0, 0, 40]
                },
                axisLine: {
                    show: true,
                    lineStyle: {
                        color: '#666'
                    }
                },
                splitLine: {
                    lineStyle: {
                        type: 'dashed'
                    }
                }
            },
            visualMap: {
                min: 0,
                max: 225,
                calculable: true,
                orient: 'horizontal',
                left: 'center',
                bottom: 50,  // 修改：从 10 调整为 30，向下移动
                text: ['高', '低'],
                inRange: {
                    color: ['#E0BBE4', '#8E44AD']
                },
                textStyle: {
                    color: '#333'
                }
            },
            series: [{
                data: data.counts.map((count, index) => ({
                    value: count,
                    name: data.cities[index]
                })),
                type: 'bar',
                barWidth: '60%',
                itemStyle: {
                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                        { offset: 0, color: '#E0BBE4' },
                        { offset: 1, color: '#8E44AD' }
                    ]),
                    borderRadius: [4, 4, 0, 0]
                },
                emphasis: {
                    itemStyle: {
                        shadowBlur: 10,
                        shadowOffsetX: 0,
                        shadowColor: 'rgba(142, 68, 173, 0.5)'
                    }
                },
                label: {
                    show: true,
                    position: 'top',
                    formatter: '{c}',
                    color: '#8E44AD'
                }
            }]
        };

        // 应用配置
        myChart.setOption(option);

        // 点击事件
        myChart.on('click', function(params) {
            alert(`${params.name}的菜市场数量：${params.value}个`);
        });

        // 响应式调整
        window.addEventListener('resize', function() {
            myChart.resize();
        });
    </script>
</body>
</html>
